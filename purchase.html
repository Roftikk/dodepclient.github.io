<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Купить RustMe - Оформление заказа</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Навигация -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-shield-alt"></i>
                <span>RustMe</span>
                <span class="logo-badge">Покупка</span>
            </div>
            
            <div class="nav-links">
                <a href="index.html" class="nav-link">Главная</a>
                <a href="dashboard.html" class="nav-link">Кабинет</a>
                <a href="support.html" class="nav-link">Поддержка</a>
            </div>
            
            <button class="nav-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <section class="purchase-section">
        <div class="section-header">
            <h1 class="section-title">Оформление <span class="gradient-text">заказа</span></h1>
            <p class="section-subtitle">Завершите покупку выбранного мода</p>
        </div>
        
        <div class="purchase-container">
            <div class="purchase-mod-info">
                <div class="mod-highlight">
                    <div class="mod-highlight-icon" id="modIcon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div>
                        <h2 id="modName">RustMe Full</h2>
                        <p id="modDescription">Полный доступ ко всем функциям VIP</p>
                    </div>
                </div>
                
                <div class="mod-features" id="modFeatures">
                    <!-- Features will be loaded by JS -->
                </div>
                
                <div class="mod-price" style="margin-top: 2rem;">
                    <div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.5rem;">Общая стоимость:</div>
                    <div style="font-size: 2.5rem; font-weight: 800; color: var(--primary);" id="totalPrice">199₽</div>
                </div>
            </div>
            
            <div class="purchase-form">
                <div class="auth-card">
                    <h2 style="margin-bottom: 1.5rem;">Данные для покупки</h2>
                    
                    <div class="form-group">
                        <label for="purchaseUsername">Ваш никнейм в Rust</label>
                        <input type="text" id="purchaseUsername" class="form-input" placeholder="Введите ваш никнейм" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="purchaseEmail">Email для связи</label>
                        <input type="email" id="purchaseEmail" class="form-input" placeholder="your@email.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="purchasePeriod">Срок подписки</label>
                        <select id="purchasePeriod" class="form-input" onchange="updatePrice()">
                            <option value="30">30 дней</option>
                            <option value="90">90 дней (-10%)</option>
                            <option value="180">180 дней (-20%)</option>
                            <option value="365">365 дней (-30%)</option>
                        </select>
                    </div>
                    
                    <div class="payment-methods">
                        <h3>Способ оплаты</h3>
                        <div class="payment-options">
                            <div class="payment-option active" onclick="selectPayment('qiwi')">
                                <i class="fas fa-wallet"></i>
                                <div>QIWI</div>
                            </div>
                            <div class="payment-option" onclick="selectPayment('card')">
                                <i class="fas fa-credit-card"></i>
                                <div>Карта</div>
                            </div>
                            <div class="payment-option" onclick="selectPayment('crypto')">
                                <i class="fab fa-bitcoin"></i>
                                <div>Crypto</div>
                            </div>
                        </div>
                        
                        <div id="paymentDetails">
                            <p>Для оплаты через QIWI:</p>
                            <ol style="margin: 1rem 0; padding-left: 1.5rem;">
                                <li>Перейдите в приложение QIWI</li>
                                <li>Выберите "Оплата по номеру"</li>
                                <li>Введите: <strong>+79991234567</strong></li>
                                <li>Укажите сумму: <strong id="paymentAmount">199₽</strong></li>
                                <li>В комментарии укажите ваш никнейм</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="form-group" style="margin-top: 1.5rem;">
                        <label>
                            <input type="checkbox" id="acceptRules" required>
                            Я согласен с <a href="rules.html" style="color: var(--primary);">правилами использования</a>
                        </label>
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="processPurchase()">
                        <i class="fas fa-shopping-cart"></i> Перейти к оплате
                    </button>
                    
                    <div style="text-align: center; margin-top: 1.5rem;">
                        <p>Или напишите нам напрямую в Telegram:</p>
                        <a href="https://t.me/dadepbabki" target="_blank" class="telegram-link">
                            <i class="fab fa-telegram"></i> @dadepbabki
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="script.js"></script>
    <script>
        // Загрузка данных о моде из URL
        const urlParams = new URLSearchParams(window.location.search);
        const modType = urlParams.get('mod') || 'full';
        
        const mods = {
            'full': {
                name: 'RustMe Full',
                icon: 'fas fa-crown',
                color: '#f59e0b',
                price: 199,
                features: [
                    'Все функции ESP',
                    'Умный Aimbot',
                    'Fly Hack',
                    'No Recoil',
                    'Chams',
                    'Приоритетная поддержка',
                    'Ранний доступ к обновлениям'
                ],
                description: 'Полный доступ ко всем функциям VIP'
            },
            'basic': {
                name: 'RustMe Basic',
                icon: 'fas fa-eye',
                color: '#3b82f6',
                price: 99,
                features: [
                    'Only ESP',
                    'Фильтры предметов',
                    'Радар',
                    'Базовый интерфейс'
                ],
                description: 'Только ESP для безопасной игры'
            },
            'legit': {
                name: 'RustMe Legit',
                icon: 'fas fa-user-secret',
                color: '#10b981',
                price: 79,
                features: [
                    'Only Chams',
                    'Bind H',
                    'Скрытый интерфейс',
                    'Анти-репорт',
                    'Безопасный режим'
                ],
                description: 'Только чамсы и бинды для максимальной скрытности'
            },
            'lite': {
                name: 'RustMe Lite',
                icon: 'fas fa-bolt',
                color: '#8b5cf6',
                price: 89,
                features: [
                    'No Recoil',
                    'ESP Basic',
                    'Авто-сбор',
                    'Быстрые стройки',
                    'Умный инвентарь'
                ],
                description: 'Отличный баланс возможностей и скрытности'
            }
        };
        
        const mod = mods[modType] || mods.full;
        
        // Обновление интерфейса
        document.getElementById('modName').textContent = mod.name;
        document.getElementById('modDescription').textContent = mod.description;
        document.getElementById('modIcon').innerHTML = `<i class="${mod.icon}"></i>`;
        document.getElementById('modIcon').style.background = `rgba(${parseInt(mod.color.slice(1,3), 16)}, ${parseInt(mod.color.slice(3,5), 16)}, ${parseInt(mod.color.slice(5,7), 16)}, 0.2)`;
        
        const featuresList = document.getElementById('modFeatures');
        featuresList.innerHTML = mod.features.map(feature => `
            <div class="feature-item">
                <i class="fas fa-check-circle" style="color: ${mod.color}"></i>
                <span>${feature}</span>
            </div>
        `).join('');
        
        // Функции для покупки
        let selectedPayment = 'qiwi';
        let basePrice = mod.price;
        
        function updatePrice() {
            const period = parseInt(document.getElementById('purchasePeriod').value);
            let price = basePrice;
            
            // Скидки за период
            if (period === 90) price = Math.round(basePrice * 2.7 * 0.9); // -10%
            if (period === 180) price = Math.round(basePrice * 6 * 0.8); // -20%
            if (period === 365) price = Math.round(basePrice * 12 * 0.7); // -30%
            
            document.getElementById('totalPrice').textContent = `${price}₽`;
            document.getElementById('paymentAmount').textContent = `${price}₽`;
        }
        
        function selectPayment(method) {
            selectedPayment = method;
            document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('active'));
            event.target.closest('.payment-option').classList.add('active');
            
            const details = document.getElementById('paymentDetails');
            let html = '';
            
            switch(method) {
                case 'qiwi':
                    html = `
                        <p>Для оплаты через QIWI:</p>
                        <ol style="margin: 1rem 0; padding-left: 1.5rem;">
                            <li>Перейдите в приложение QIWI</li>
                            <li>Выберите "Оплата по номеру"</li>
                            <li>Введите: <strong>+79991234567</strong></li>
                            <li>Укажите сумму: <strong>${document.getElementById('paymentAmount').textContent}</strong></li>
                            <li>В комментарии укажите ваш никнейм</li>
                        </ol>
                    `;
                    break;
                case 'card':
                    html = `
                        <p>Оплата банковской картой:</p>
                        <ol style="margin: 1rem 0; padding-left: 1.5rem;">
                            <li>Нажмите кнопку "Перейти к оплате"</li>
                            <li>Будет открыта безопасная платежная форма</li>
                            <li>Введите данные вашей карты</li>
                            <li>Подтвердите оплату</li>
                        </ol>
                    `;
                    break;
                case 'crypto':
                    html = `
                        <p>Оплата криптовалютой:</p>
                        <ol style="margin: 1rem 0; padding-left: 1.5rem;">
                            <li>Выберите криптовалюту (BTC/ETH/USDT)</li>
                            <li>Отправьте сумму на адрес:</li>
                            <li><strong style="word-break: break-all;">bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh</strong></li>
                            <li>После 3 подтверждений сетью ключ будет отправлен</li>
                        </ol>
                    `;
                    break;
            }
            
            details.innerHTML = html;
        }
        
        function processPurchase() {
            const username = document.getElementById('purchaseUsername').value;
            const email = document.getElementById('purchaseEmail').value;
            const period = document.getElementById('purchasePeriod').value;
            const acceptRules = document.getElementById('acceptRules').checked;
            
            if (!username || !email) {
                alert('Пожалуйста, заполните все поля');
                return;
            }
            
            if (!acceptRules) {
                alert('Необходимо согласиться с правилами использования');
                return;
            }
            
            const price = document.getElementById('totalPrice').textContent;
            const modName = document.getElementById('modName').textContent;
            
            // Сохраняем данные покупки
            const purchaseData = {
                mod: modType,
                modName: modName,
                username: username,
                email: email,
                period: period,
                price: price,
                payment: selectedPayment,
                date: new Date().toISOString(),
                status: 'pending'
            };
            
            localStorage.setItem('rustme_last_purchase', JSON.stringify(purchaseData));
            
            // Перенаправляем в Telegram
            const message = `Хочу купить ${modName} на ${period} дней\nНикнейм: ${username}\nEmail: ${email}\nСумма: ${price}\nСпособ оплаты: ${selectedPayment}`;
            const telegramUrl = `https://t.me/dadepbabki?text=${encodeURIComponent(message)}`;
            
            window.open(telegramUrl, '_blank');
            
            // Показываем подтверждение
            alert('Открывается Telegram для завершения покупки. После оплаты свяжитесь с @dadepbabki для получения ключа.');
        }
        
        // Инициализация
        updatePrice();
        selectPayment('qiwi');
    </script>
</body>
</html>